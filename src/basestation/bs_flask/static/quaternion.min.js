/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /gh/infusion/Quaternion.js@2.0.0/quaternion.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
!function(t){"use strict";function i(t,i){var n=Math.abs(t),r=Math.abs(i);return 0===t?Math.log(r):0===i?Math.log(n):n<3e3&&r<3e3?.5*Math.log(t*t+i*i):Math.log(t/Math.cos(Math.atan2(i,t)))}var n={w:1,x:0,y:0,z:0};function r(t,i,r,s,e){if(void 0!==e)return t.w=i,t.x=r,t.y=s,void(t.z=e);if("object"==typeof i&&void 0===s){if("w"in i||"x"in i||"y"in i||"z"in i)return t.w=i.w||0,t.x=i.x||0,t.y=i.y||0,void(t.z=i.z||0);if("re"in i&&"im"in i)return t.w=i.re,t.x=i.im,t.y=0,void(t.z=0);if(4===i.length)return t.w=i[0],t.x=i[1],t.y=i[2],void(t.z=i[3]);if(3===i.length)return t.w=0,t.x=i[0],t.y=i[1],void(t.z=i[2]);throw new Error("Invalid object")}if("string"!=typeof i||void 0!==s)void 0===i&&t!==n?(t.w=1,t.x=t.y=t.z=0):(t.w=i||0,r&&3===r.length?(t.x=r[0],t.y=r[1],t.z=r[2]):(t.x=r||0,t.y=s||0,t.z=e||0));else{var h=i.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),a=1,o=0,w={i:"x",j:"y",k:"z"};if(null===h)throw new Error("Parse error");t.w=t.x=t.y=t.z=0;for(var u=0;u<h.length;u++){var f=h[u],c=h[u+1];if(" "===f||"\t"===f||"\n"===f);else if("+"===f)a++;else if("-"===f)o++;else{if(a+o===0)throw new Error("Parse error"+f);var x=w[f];if(void 0!==x)" "===c||isNaN(c)?f="1":(f=c,u++);else{if(isNaN(f))throw new Error("Parser error");void 0!==(x=w[c])&&u++}t[x||"w"]+=parseFloat((o%2?"-":"")+f),a=o=0}}if(a+o>0)throw new Error("Parser error")}}function s(t,i,n){var r="";return 0!==t&&(""!==n?r+=t<0?" - ":" + ":t<0&&(r+="-"),1===(t=Math.abs(t))&&""!==i||(r+=t),r+=i),r}function e(t,i,n,s){if(!(this instanceof e))return new e(t,i,n,s);r(this,t,i,n,s)}e.prototype={w:1,x:0,y:0,z:0,add:function(t,i,s,h){return r(n,t,i,s,h),new e(this.w+n.w,this.x+n.x,this.y+n.y,this.z+n.z)},sub:function(t,i,s,h){return r(n,t,i,s,h),new e(this.w-n.w,this.x-n.x,this.y-n.y,this.z-n.z)},neg:function(){return new e(-this.w,-this.x,-this.y,-this.z)},norm:function(){var t=this.w,i=this.x,n=this.y,r=this.z;return Math.sqrt(t*t+i*i+n*n+r*r)},normSq:function(){var t=this.w,i=this.x,n=this.y,r=this.z;return t*t+i*i+n*n+r*r},normalize:function(){var t=this.w,i=this.x,n=this.y,r=this.z,s=Math.sqrt(t*t+i*i+n*n+r*r);return s<e.EPSILON?e.ZERO:new e(t*(s=1/s),i*s,n*s,r*s)},mul:function(t,i,s,h){r(n,t,i,s,h);var a=this.w,o=this.x,w=this.y,u=this.z,f=n.w,c=n.x,x=n.y,y=n.z;return new e(a*f-o*c-w*x-u*y,a*c+o*f+w*y-u*x,a*x+w*f+u*c-o*y,a*y+u*f+o*x-w*c)},scale:function(t){return new e(this.w*t,this.x*t,this.y*t,this.z*t)},dot:function(t,i,s,e){return r(n,t,i,s,e),this.w*n.w+this.x*n.x+this.y*n.y+this.z*n.z},inverse:function(){var t=this.w,i=this.x,n=this.y,r=this.z,s=t*t+i*i+n*n+r*r;return 0===s?e.ZERO:new e(t*(s=1/s),-i*s,-n*s,-r*s)},div:function(t,i,s,h){r(n,t,i,s,h);var a=this.w,o=this.x,w=this.y,u=this.z,f=n.w,c=n.x,x=n.y,y=n.z,z=f*f+c*c+x*x+y*y;return 0===z?e.ZERO:new e((a*f+o*c+w*x+u*y)*(z=1/z),(o*f-a*c-w*y+u*x)*z,(w*f-a*x-u*c+o*y)*z,(u*f-a*y-o*x+w*c)*z)},conjugate:function(){return new e(this.w,-this.x,-this.y,-this.z)},exp:function(){var t=this.w,i=this.x,n=this.y,r=this.z,s=Math.sqrt(i*i+n*n+r*r),h=Math.exp(t),a=h/s*Math.sin(s);return 0===s?new e(h,0,0,0):new e(h*Math.cos(s),i*a,n*a,r*a)},log:function(){var t=this.w,n=this.x,r=this.y,s=this.z;if(0===r&&0===s)return new e(i(t,n),Math.atan2(n,t),0,0);var h=n*n+r*r+s*s+t*t,a=Math.sqrt(n*n+r*r+s*s),o=Math.atan2(a,t)/a;return new e(.5*Math.log(h),n*o,r*o,s*o)},pow:function(t,s,h,a){if(r(n,t,s,h,a),0===n.y&&0===n.z){if(1===n.w&&0===n.x)return this;if(0===n.w&&0===n.x)return e.ONE;if(0===this.y&&0===this.z){var o=this.w,w=this.x;if(0===o&&0===w)return e.ZERO;var u=Math.atan2(w,o),f=i(o,w);if(0===n.x){if(0===w&&o>=0)return new e(Math.pow(o,n.w),0,0,0);if(0===o)switch(n.w%4){case 0:return new e(Math.pow(w,n.w),0,0,0);case 1:return new e(0,Math.pow(w,n.w),0,0);case 2:return new e(-Math.pow(w,n.w),0,0,0);case 3:return new e(0,-Math.pow(w,n.w),0,0)}}return o=Math.exp(n.w*f-n.x*u),w=n.x*f+n.w*u,new e(o*Math.cos(w),o*Math.sin(w),0,0)}}return this.log().mul(n).exp()},equals:function(t,i,s,h){r(n,t,i,s,h);var a=e.EPSILON;return Math.abs(n.w-this.w)<a&&Math.abs(n.x-this.x)<a&&Math.abs(n.y-this.y)<a&&Math.abs(n.z-this.z)<a},isFinite:function(){return isFinite(this.w)&&isFinite(this.x)&&isFinite(this.y)&&isFinite(this.z)},isNaN:function(){return isNaN(this.w)||isNaN(this.x)||isNaN(this.y)||isNaN(this.z)},toString:function(){var t=this.w,i=this.x,n=this.y,r=this.z,e="";return isNaN(t)||isNaN(i)||isNaN(n)||isNaN(r)?"NaN":(e=s(t,"",e),e+=s(i,"i",e),e+=s(n,"j",e),""===(e+=s(r,"k",e))?"0":e)},real:function(){return this.w},imag:function(){return[this.x,this.y,this.z]},toVector:function(){return[this.w,this.x,this.y,this.z]},toMatrix:function(t){var i=this.w,n=this.x,r=this.y,s=this.z,e=i*i+n*n+r*r+s*s,h=0===e?0:2/e,a=h*i*n,o=h*i*r,w=h*i*s,u=h*n*n,f=h*n*r,c=h*n*s,x=h*r*r,y=h*r*s,z=h*s*s;return t?[[1-(x+z),f-w,c+o],[f+w,1-(u+z),y-a],[c-o,y+a,1-(u+x)]]:[1-(x+z),f-w,c+o,f+w,1-(u+z),y-a,c-o,y+a,1-(u+x)]},toMatrix4:function(t){var i=this.w,n=this.x,r=this.y,s=this.z,e=i*i+n*n+r*r+s*s,h=0===e?0:2/e,a=h*i*n,o=h*i*r,w=h*i*s,u=h*n*n,f=h*n*r,c=h*n*s,x=h*r*r,y=h*r*s,z=h*s*s;return t?[[1-(x+z),f-w,c+o,0],[f+w,1-(u+z),y-a,0],[c-o,y+a,1-(u+x),0],[0,0,0,1]]:[1-(x+z),f-w,c+o,0,f+w,1-(u+z),y-a,0,c-o,y+a,1-(u+x),0,0,0,0,1]},clone:function(){return new e(this)},rotateVector:function(t){var i=this.w,n=this.x,r=this.y,s=this.z,e=t[0],h=t[1],a=t[2],o=-n*e-r*h-s*a,w=i*e+r*a-s*h,u=i*h+s*e-n*a,f=i*a+n*h-r*e;return[w*i-o*n-u*s+f*r,u*i-o*r-f*n+w*s,f*i-o*s-w*r+u*n]}},e.ZERO=new e(0,0,0,0),e.ONE=new e(1,0,0,0),e.I=new e(0,1,0,0),e.J=new e(0,0,1,0),e.K=new e(0,0,0,1),e.EPSILON=1e-16,e.fromAxisAngle=function(t,i){var n=.5*i,r=t[0],s=t[1],h=t[2],a=Math.sin(n),o=Math.cos(n),w=a/Math.sqrt(r*r+s*s+h*h);return new e(o,r*w,s*w,h*w)},e.fromBetweenVectors=function(t,i){var n=t[0],r=t[1],s=t[2],h=i[0],a=i[1],o=i[2],w=n*h+r*a+s*o,u=r*o-s*a,f=s*h-n*o,c=n*a-r*h;return new e(w+Math.sqrt(w*w+u*u+f*f+c*c),u,f,c).normalize()},e.fromEuler=function(t,i,n,r){var s=.5*i,h=.5*n,a=.5*t,o=Math.cos(s),w=Math.cos(h),u=Math.cos(a),f=Math.sin(s),c=Math.sin(h),x=Math.sin(a);return void 0===r||"ZXY"===r?new e(o*w*u-f*c*x,f*w*u-o*c*x,o*c*u+f*w*x,o*w*x+f*c*u):"XYZ"===r?new e(o*w*u-f*c*x,f*w*u+o*c*x,o*c*u-f*w*x,o*w*x+f*c*u):"YXZ"===r?new e(o*w*u+f*c*x,f*w*u+o*c*x,o*c*u-f*w*x,o*w*x-f*c*u):"ZYX"===r?new e(o*w*u+f*c*x,f*w*u-o*c*x,o*c*u+f*w*x,o*w*x-f*c*u):"YZX"===r?new e(o*w*u-f*c*x,f*w*u+o*c*x,o*c*u+f*w*x,o*w*x-f*c*u):"XZY"===r?new e(o*w*u+f*c*x,f*w*u-o*c*x,o*c*u-f*w*x,o*w*x+f*c*u):null},"function"==typeof define&&define.amd?define([],function(){return e}):"object"==typeof exports?module.exports=e:t.Quaternion=e}(this);
//# sourceMappingURL=/sm/c8b049560b331904526d7aa1673cd23b74bb79a846a33ea36e84e9f008a1df26.map